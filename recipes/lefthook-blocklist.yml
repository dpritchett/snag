pre-commit:
  commands:
    blocklist:
      run: snag check diff
      fail_text: >
        Staged diff contains a blocked pattern.
        See .blocklist (or parent directories) for the active pattern list.
        https://github.com/dpritchett/snag

commit-msg:
  commands:
    blocklist:
      run: snag check msg {1}
      fail_text: >
        Commit message contains a blocked pattern.
        Matching trailer lines are stripped automatically.
        To recover your message: git commit -eF .git/COMMIT_EDITMSG
        https://github.com/dpritchett/snag

pre-push:
  commands:
    blocklist:
      run: snag check push
      fail_text: >
        Unpushed commits contain a blocked pattern (message or diff).
        https://github.com/dpritchett/snag

post-checkout:
  commands:
    snag-setup-check:
      run: snag check checkout
      fail_text: >
        This repo has a .blocklist but snag hooks aren't installed.
        Run: snag install && lefthook install
        https://github.com/dpritchett/snag

prepare-commit-msg:
  commands:
    blocklist:
      run: snag check prepare {1} {2} {3}
      fail_text: >
        Auto-generated commit message contains a blocked pattern.
        Use: git commit -m "your message" or git commit -e
        https://github.com/dpritchett/snag

pre-rebase:
  commands:
    snag-branch-guard:
      run: snag check rebase {1} {2}
      fail_text: >
        Rebase blocked â€” target is a protected branch.
        To override: SNAG_ALLOW_REBASE=1 git rebase ...
        https://github.com/dpritchett/snag
